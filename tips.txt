# via Serial:

import network
wlan = network.WLAN(network.STA_IF)
wlan.active(True)
wlan.connect('FRITZ!HH','47114711')
import webrepl
webrepl.start()

dann 
# show files:
import os
os.listdir()
os.remove('mydu1.py')
file = open('error.log', 'r')
print(file.read())
file.close()

# UART
from machine import UART
uart = UART(0, 38400)   # 0 or 1
uart.init(baudrate=38400, bits=8, parity=None, stop=1)
uart.write('abc')
b=uart.read(1)

# disconnect
import os
os.dupterm(None, 1)

#flashsize
import esp
esp.flash_size()

#Formatierung
print(f"'{zahl:>5}'")  # rechtsbündig, Breite 5 
print(f"{pi:8.2f}")    # '    3.14' (Breite 8, 2 Nachkommastellen)


#Neustart
import sys
sys.exit()

#compiler
mpy-cross myscript.py

#exceptions
try:
    1/0
except Exception as e:
    import sys
    with open("error.log", "a") as f:
        sys.print_exception(e, f)
	  

# binarys
	b'a'  	65
	b'\xf0'	
	bytes([255])	b'\xff'
	int.from_bytes(b'\xf0')	240
	a=bytearray(4)
	a[0]=128
	string = data.decode('utf-8')
	
# I2C
import machine
from machine import I2C
pinSDA=machine.Pin(4) #green
pinSCL=machine.Pin(5) #yell
c=I2C(scl=pinSCL, sda=pinSDA)
c.readfrom(devaddr,cnt)
c.writeto(32, b'\xff')¶   #   devaddr, buf

c.writeto_mem(39,0,b'\0')
c.readfrom_mem(devaddr, memaddr, nbytes) 
c.

# Pin Mapping
https://wolles-elektronikkiste.de/wemos-d1-mini-boards
 
 
# nrf24L01
https://www.az-delivery.de/en/blogs/azdelivery-blog-fur-arduino-und-raspberry-pi/avr-goes-esp-teil-1

Top View:
  GPIO                               GPIO
       rot	2  VCC     GND  1  schw
	4  blau	4  CSN     CE   3  weis    5
   13  grn	6  MOSI    SCK  5  gelb   14
-     blau	8  IRQ     MISO 7  weis   12

IRQ auf 2
CE  auf 0
CSN auf 15


CE High schaltet Radio an
CSN Low SPI enable


#MPU6050  
from mpu6050 import MPU6050
imu = MPU6050(2,False)


#Anschluss
RST	pink	TXD	green
ADC			RXD	yell
EN			SCL	yell
IO16		SDA	grn
IO14			IO00	ws
IO12			IO16
IO13
VCC

#setup go to pogramming Mode hold grey, press pink, release pink, release grey, nicht erforderlich bei d1
d:\esp
python -m esptool --port com3 erase_flash
python -m esptool --port com3 --baud 460800 write_flash --flash_size=detect 0 ESP8266_GENERIC-20241129-v1.24.1.bin
after Reset:
cd microp
ampy --port COM3 put boot.py boot.py
ampy --port COM3 put webrepl_cfg.py webrepl_cfg.py
Reset
Find IP (43)
putHelper.bat 43
putbas.bat 43
reset


mpy-cross myscript.py

#QMC5883
7.1 Setup
 Write Register 0BH by 0x01 (Define Set/Reset period)
                  11     1
 Write Register 09H by 0x1D (Define OSR = 512, Full Scale Range = 8 Gauss, ODR = 200Hz, set continuous
			9      29  
7.2 measurement mode)
Measurement Example
 Check status register 06H[0] ,”1” means ready.
 Read data register 00H ~ 05H.
7.3
Standby Example
7.4  Write Register 09H by 0x00
Soft Reset Example
 Write Register 0AH by 0x80
			10    128 

			
***ESP8266
========			
python -m esptool --port com3 erase_flash
python -m esptool --port com4 --baud 460800 write_flash --flash_size=detect 0 ESP8266_GENERIC-20241129-v1.24.1.bin
ampy --port COM3 put boot.py boot.py
ampy --port COM4 put webrepl_cfg.py webrepl_cfg.py

			
***ESP32
========
Spannungsversorgung mindestens 500 mA!!!!, USB reicht oft nicht

vor Aufruf GPIO00 auf Ground setzen und halten, da nachfolgend ein Reset (über USB) ausführt:
python -m esptool --port com3 --chip esp32 erase_flash
python -m esptool --chip esp32 --port com3 write_flash -z 0x1000 ESP32_GENERIC-20241129-v1.24.1.bin


Reset ist EN,  dies wird aber über UART leichter gemacht, evtl mit Widerstand auf Ground ziehen

beautify

flake8
black

#Notepad++ 
Plugins → NppExec → Execute…
NPP_SAVE
cmd /c  "d:\esp\microp\putf "  $(FILE_NAME)  47

Plugins → NppExec → Advanced Options…
Associated Script
put..  restart B

Zuordnen zu F1,F2
Settings → Shortcut Mapper → Plugin Commands
